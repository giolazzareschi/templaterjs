var Ajax=Base.extend({xhr:void 0,url:"",responseType:"json",get__:function(){this.xhr.open("GET",this.url,!0),this.xhr.onreadystatechange=this.ready.bind(this),this.xhr.send()},get:function(){},owner:void 0,constructor:function(a){a&&void 0!==a.url&&(this.url=a.url,this.xhr=new XMLHttpRequest,void 0!==a.owner&&(this.owner=a.owner),void 0!==a.get&&(this.get=a.get.bind(this.owner)),void 0!==a.error&&(this.error=a.error.bind(this.owner)))},ready:function(){if(200===this.xhr.status&&4===this.xhr.readyState){var a=this.xhr.responseText;"json"===this.responseType&&(a=JSON.parse(this.xhr.responseText)),this.get(a)}}}),Templater=Base.extend({template:"",template_data:{},child_template:void 0,dom:void 0,hasChild:!1,events:{},buffer_rollback:void 0,parent:void 0,ajax:void 0,model:void 0,constructor:function(a){a&&void 0!==a.model?(a.model.owner=this,this.ajax=new Ajax(a.model)):void 0!==this.model&&(this.model.owner=this,this.ajax=new Ajax(this.model)),a&&void 0!==a.template&&""!==a.template&&(this.template=a.template),a&&void 0!==a.template_data&&(this.template_data=a.template_data),a&&void 0!==a.events&&(this.events=a.events),a&&void 0!==a.parent&&(this.parent=a.parent),""!==this.template&&this.update_dom()},server_get:function(){this.ajax.get__()},hbs:function(){return this.update_child_template(),Handlebars.compile(this.template)(this.template_data)},binds:function(){},hide:function(){this.dom.classList.add("hide")},show:function(){this.dom.classList.remove("hide")},update_dom:function(a){if(a)this.dom=a,this.buffer_rollback=void 0;else{var b=document.createElement("div");b.innerHTML=this.hbs(),this.dom=b.children[0]}this.get_template_elements();for(p in this.events)this.register_events(p,this.events[p]);this.binds()},update_child_template:function(){if(void 0!==this.child_template)for(tpl in this.child_template)this.template_data[tpl]=Handlebars.compile(this.child_template[tpl])(this.template_data)},get_dom:function(){var a=document.createElement("div");return a.innerHTML=this.hbs(),a.children[0]},get_template_elements:function(a){if(this.dom)for(var a=void 0!==a?a:this.dom,b=a.querySelectorAll("*[id]"),c=0,d=b.length;d>c;c++){var e=b[c];void 0===this.elements&&(this.elements={});try{this.elements[e.id]=e}catch(f){}}},register_events:function(a,b,c){var d=a.split(" "),e=d[0],f=d.splice(1).join(" ").trim(),c=void 0!==c?c:this.dom;try{c.querySelector(f).addEventListener(e,b.bind(this),!1)}catch(g){console.log(f),console.log(g)}},render:function(a){this.receiver=a,a.innerHTML="",a.appendChild(this.dom)},append:function(a){this.receiver=a,a.appendChild(this.dom)},clear:function(a){this.receiver=a,this.receiver.innerHTML=""},repaint:function(){this.buffer_rollback=this.dom.cloneNode(!0);var a=this.get_dom();this.dom.parentNode.replaceChild(a,this.dom),this.dom=a,this.get_template_elements();for(p in this.events)this.register_events(p,this.events[p],this.dom);this.binds()},rollback:function(){this.buffer_rollback&&(this.update_dom(this.buffer_rollback),this.receiver.innerHTML="",this.receiver.appendChild(this.dom))},remove:function(){this.dom.parentNode.removeChild(this.dom)},destroy:function(){this.dom.parentNode.removeChild(this.dom),delete this}});